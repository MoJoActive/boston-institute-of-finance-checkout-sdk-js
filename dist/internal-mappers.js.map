{"version":3,"file":"internal-mappers.js","mappings":"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","sources":["webpack://@bigcommerce/checkout-sdk/webpack/bootstrap","webpack://@bigcommerce/checkout-sdk/webpack/runtime/compat get default export","webpack://@bigcommerce/checkout-sdk/webpack/runtime/define property getters","webpack://@bigcommerce/checkout-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://@bigcommerce/checkout-sdk/webpack/runtime/make namespace object","webpack://@bigcommerce/checkout-sdk/./packages/core/src/address/map-to-internal-address.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/billing/is-billing-address-like.ts","webpack://@bigcommerce/checkout-sdk/external commonjs \"lodash\"","webpack://@bigcommerce/checkout-sdk/./packages/core/src/common/utility/amount-transformer.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/coupon/map-to-internal-coupon.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/coupon/map-to-internal-gift-certificate.ts","webpack://@bigcommerce/checkout-sdk/external commonjs \"tslib\"","webpack://@bigcommerce/checkout-sdk/./packages/core/src/cart/map-to-internal-line-item.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/cart/map-to-internal-line-items.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/cart/map-gift-certificate-to-internal-line-item.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/cart/map-to-internal-cart.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/promotion/map-to-discount-notifications.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/customer/map-to-internal-customer.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/order/map-to-internal-order.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/quote/map-to-internal-quote.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/shipping/map-to-internal-shipping-option.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/shipping/map-to-internal-shipping-options.ts","webpack://@bigcommerce/checkout-sdk/external commonjs \"shallowequal\"","webpack://@bigcommerce/checkout-sdk/./packages/core/src/common/utility/cache-key-maps.ts","webpack://@bigcommerce/checkout-sdk/./packages/core/src/common/utility/cache-key-resolver.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { BillingAddress, isBillingAddressLike } from '../billing';\r\nimport { Consignment } from '../shipping';\r\n\r\nimport Address from './address';\r\nimport InternalAddress from './internal-address';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalAddress(\r\n    address: Address | BillingAddress,\r\n    consignments?: Consignment[],\r\n): InternalAddress<any> {\r\n    let addressId;\r\n\r\n    if (isBillingAddressLike(address)) {\r\n        addressId = address.id;\r\n    } else if (consignments && consignments.length) {\r\n        addressId = consignments[0].id;\r\n    }\r\n\r\n    return {\r\n        id: addressId,\r\n        firstName: address.firstName,\r\n        lastName: address.lastName,\r\n        company: address.company,\r\n        addressLine1: address.address1,\r\n        addressLine2: address.address2,\r\n        city: address.city,\r\n        province: address.stateOrProvince,\r\n        provinceCode: address.stateOrProvinceCode,\r\n        postCode: address.postalCode,\r\n        country: address.country,\r\n        countryCode: address.countryCode,\r\n        phone: address.phone,\r\n        customFields: address.customFields,\r\n    };\r\n}\r\n","import { Address } from '../address';\r\n\r\nimport BillingAddress from './billing-address';\r\n\r\nexport default function isBillingAddressLike(address: Address): address is BillingAddress {\r\n    const billingAddress = address as BillingAddress;\r\n\r\n    return typeof billingAddress.id !== 'undefined';\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash\");","export default class AmountTransformer {\r\n    constructor(private _decimalPlaces: number) {}\r\n\r\n    toInteger(amount: number): number {\r\n        return Math.round(amount * Math.pow(10, this._decimalPlaces));\r\n    }\r\n}\r\n","import Coupon from './coupon';\r\nimport InternalCoupon from './internal-coupon';\r\n\r\nconst couponTypes = [\r\n    'per_item_discount',\r\n    'percentage_discount',\r\n    'per_total_discount',\r\n    'shipping_discount',\r\n    'free_shipping',\r\n];\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalCoupon(coupon: Coupon): InternalCoupon {\r\n    return {\r\n        code: coupon.code,\r\n        discount: coupon.displayName,\r\n        discountType: couponTypes.indexOf(coupon.couponType),\r\n    };\r\n}\r\n","import GiftCertificate from './gift-certificate';\r\nimport InternalGiftCertificate from './internal-gift-certificate';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalGiftCertificate(\r\n    giftCertificate: GiftCertificate,\r\n): InternalGiftCertificate {\r\n    return {\r\n        code: giftCertificate.code,\r\n        discountedAmount: giftCertificate.used,\r\n        remainingBalance: giftCertificate.remaining,\r\n        giftCertificate: {\r\n            balance: giftCertificate.balance,\r\n            code: giftCertificate.code,\r\n            purchaseDate: giftCertificate.purchaseDate,\r\n        },\r\n    };\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"tslib\");","import { AmountTransformer } from '../common/utility';\r\n\r\nimport InternalLineItem from './internal-line-item';\r\nimport { DigitalItem, LineItem } from './line-item';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalLineItem(\r\n    item: LineItem,\r\n    type: string,\r\n    decimalPlaces: number,\r\n    idKey: keyof LineItem = 'id',\r\n): InternalLineItem {\r\n    const amountTransformer = new AmountTransformer(decimalPlaces);\r\n\r\n    return {\r\n        id: item[idKey] as string | number,\r\n        imageUrl: item.imageUrl,\r\n        amount: item.extendedListPrice,\r\n        amountAfterDiscount: item.extendedSalePrice,\r\n        discount: item.discountAmount,\r\n        integerAmount: amountTransformer.toInteger(item.extendedListPrice),\r\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.extendedSalePrice),\r\n        integerDiscount: amountTransformer.toInteger(item.discountAmount),\r\n        integerUnitPrice: amountTransformer.toInteger(item.listPrice),\r\n        integerUnitPriceAfterDiscount: amountTransformer.toInteger(item.salePrice),\r\n        downloadsPageUrl: (item as DigitalItem).downloadPageUrl,\r\n        name: item.name,\r\n        quantity: item.quantity,\r\n        brand: item.brand,\r\n        sku: item.sku,\r\n        categoryNames: item.categoryNames,\r\n        variantId: item.variantId,\r\n        productId: item.productId,\r\n        attributes: (item.options || []).map((option) => ({\r\n            name: option.name,\r\n            value: option.value,\r\n        })),\r\n        addedByPromotion: item.addedByPromotion,\r\n        type,\r\n    };\r\n}\r\n","import InternalLineItem from './internal-line-item';\r\nimport { LineItem } from './line-item';\r\nimport LineItemMap from './line-item-map';\r\nimport mapGiftCertificateToInternalLineItem from './map-gift-certificate-to-internal-line-item';\r\nimport mapToInternalLineItem from './map-to-internal-line-item';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalLineItems(\r\n    itemMap: LineItemMap,\r\n    decimalPlaces: number,\r\n    idKey: keyof LineItem = 'id',\r\n): InternalLineItem[] {\r\n    return (Object.keys(itemMap) as Array<keyof LineItemMap>).reduce(\r\n        (result, key) => [\r\n            ...result,\r\n            ...(itemMap[key] as LineItem[]).map((item: any) => {\r\n                if (key === 'giftCertificates') {\r\n                    return mapGiftCertificateToInternalLineItem(item, decimalPlaces);\r\n                }\r\n\r\n                return mapToInternalLineItem(\r\n                    item,\r\n                    mapToInternalLineItemType(key),\r\n                    decimalPlaces,\r\n                    idKey,\r\n                );\r\n            }),\r\n        ],\r\n        [] as InternalLineItem[],\r\n    );\r\n}\r\n\r\nfunction mapToInternalLineItemType(type: string): string {\r\n    switch (type) {\r\n        case 'physicalItems':\r\n            return 'ItemPhysicalEntity';\r\n\r\n        case 'digitalItems':\r\n            return 'ItemDigitalEntity';\r\n\r\n        case 'giftCertificates':\r\n            return 'ItemGiftCertificateEntity';\r\n\r\n        default:\r\n            return '';\r\n    }\r\n}\r\n","import { AmountTransformer } from '../common/utility';\r\n\r\nimport InternalLineItem from './internal-line-item';\r\nimport { GiftCertificateItem } from './line-item';\r\n\r\nexport default function mapGiftCertificateToInternalLineItem(\r\n    item: GiftCertificateItem,\r\n    decimalPlaces: number,\r\n): InternalLineItem {\r\n    const amountTransformer = new AmountTransformer(decimalPlaces);\r\n\r\n    return {\r\n        id: item.id,\r\n        imageUrl: '',\r\n        name: item.name,\r\n        amount: item.amount,\r\n        amountAfterDiscount: item.amount,\r\n        discount: 0,\r\n        integerAmount: amountTransformer.toInteger(item.amount),\r\n        integerAmountAfterDiscount: amountTransformer.toInteger(item.amount),\r\n        integerUnitPrice: amountTransformer.toInteger(item.amount),\r\n        integerUnitPriceAfterDiscount: amountTransformer.toInteger(item.amount),\r\n        integerDiscount: 0,\r\n        quantity: 1,\r\n        sender: item.sender,\r\n        recipient: item.recipient,\r\n        type: 'ItemGiftCertificateEntity',\r\n        attributes: [],\r\n        variantId: null,\r\n    };\r\n}\r\n","import { keyBy, reduce, some } from 'lodash';\r\n\r\nimport { Checkout } from '../checkout';\r\nimport { AmountTransformer } from '../common/utility';\r\nimport { mapToInternalCoupon, mapToInternalGiftCertificate } from '../coupon';\r\nimport { mapToDiscountNotifications } from '../promotion';\r\n\r\nimport InternalCart from './internal-cart';\r\nimport mapToInternalLineItems from './map-to-internal-line-items';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalCart(checkout: Checkout): InternalCart {\r\n    const decimalPlaces = checkout.cart.currency.decimalPlaces;\r\n    const amountTransformer = new AmountTransformer(decimalPlaces);\r\n\r\n    return {\r\n        id: checkout.cart.id,\r\n        items: mapToInternalLineItems(checkout.cart.lineItems, decimalPlaces),\r\n        currency: checkout.cart.currency.code,\r\n        coupon: {\r\n            discountedAmount: reduce(\r\n                checkout.cart.coupons,\r\n                (sum, coupon) => {\r\n                    return sum + coupon.discountedAmount;\r\n                },\r\n                0,\r\n            ),\r\n            coupons: checkout.cart.coupons.map(mapToInternalCoupon),\r\n        },\r\n        discount: {\r\n            amount: checkout.cart.discountAmount,\r\n            integerAmount: amountTransformer.toInteger(checkout.cart.discountAmount),\r\n        },\r\n        discountNotifications: mapToDiscountNotifications(checkout.promotions),\r\n        giftCertificate: {\r\n            totalDiscountedAmount: reduce(\r\n                checkout.giftCertificates,\r\n                (sum, certificate) => {\r\n                    return sum + certificate.used;\r\n                },\r\n                0,\r\n            ),\r\n            appliedGiftCertificates: keyBy(\r\n                checkout.giftCertificates.map(mapToInternalGiftCertificate),\r\n                'code',\r\n            ),\r\n        },\r\n        shipping: {\r\n            amount: checkout.shippingCostTotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.shippingCostTotal),\r\n            amountBeforeDiscount: checkout.shippingCostBeforeDiscount,\r\n            integerAmountBeforeDiscount: amountTransformer.toInteger(\r\n                checkout.shippingCostBeforeDiscount,\r\n            ),\r\n            required: some(\r\n                checkout.cart.lineItems.physicalItems,\r\n                (lineItem) => lineItem.isShippingRequired,\r\n            ),\r\n        },\r\n        subtotal: {\r\n            amount: checkout.subtotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.subtotal),\r\n        },\r\n        storeCredit: {\r\n            amount: checkout.customer ? checkout.customer.storeCredit : 0,\r\n        },\r\n        taxSubtotal: {\r\n            amount: checkout.taxTotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\r\n        },\r\n        taxes: checkout.taxes,\r\n        taxTotal: {\r\n            amount: checkout.taxTotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.taxTotal),\r\n        },\r\n        handling: {\r\n            amount: checkout.handlingCostTotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.handlingCostTotal),\r\n        },\r\n        grandTotal: {\r\n            amount: checkout.grandTotal,\r\n            integerAmount: amountTransformer.toInteger(checkout.grandTotal),\r\n        },\r\n    };\r\n}\r\n","import { DiscountNotification } from '../discount';\r\n\r\nimport { Promotion } from '.';\r\n\r\nexport default function mapToDiscountNotifications(\r\n    promotions?: Promotion[],\r\n): DiscountNotification[] {\r\n    const notifications: DiscountNotification[] = [];\r\n\r\n    (promotions || []).forEach((promotion) => {\r\n        (promotion.banners || []).forEach((banner) => {\r\n            notifications.push({\r\n                placeholders: [],\r\n                discountType: null,\r\n                message: '',\r\n                messageHtml: banner.text,\r\n            });\r\n        });\r\n    });\r\n\r\n    return notifications;\r\n}\r\n","import { mapToInternalAddress } from '../address';\r\nimport { OrderBillingAddress } from '../order-billing-address/order-billing-address-state';\r\n\r\nimport InternalCustomer from './internal-customer';\r\n\r\nimport { Customer } from '.';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalCustomer(\r\n    customer: Customer,\r\n    billingAddress: OrderBillingAddress,\r\n): InternalCustomer {\r\n    const firstName = customer.firstName || billingAddress.firstName || '';\r\n    const lastName = customer.lastName || billingAddress.lastName || '';\r\n\r\n    return {\r\n        addresses: (customer.addresses || []).map((address) => mapToInternalAddress(address)),\r\n        customerId: customer.id,\r\n        isGuest: customer.isGuest,\r\n        storeCredit: customer.storeCredit,\r\n        email: customer.email || billingAddress.email || '',\r\n        firstName,\r\n        lastName,\r\n        name: customer.fullName || [firstName, lastName].join(' '),\r\n        customerGroupName: customer.customerGroup && customer.customerGroup.name,\r\n    };\r\n}\r\n","import { filter, find, keyBy, reduce } from 'lodash';\r\n\r\nimport { LineItem, mapToInternalLineItems } from '../cart';\r\nimport { Checkout } from '../checkout';\r\nimport { AmountTransformer } from '../common/utility';\r\nimport { mapToInternalCoupon } from '../coupon';\r\nimport { HOSTED } from '../payment';\r\n\r\nimport InternalOrder, {\r\n    InternalGiftCertificateList,\r\n    InternalIncompleteOrder,\r\n    InternalOrderPayment,\r\n    InternalSocialDataList,\r\n} from './internal-order';\r\nimport Order, {\r\n    GatewayOrderPayment,\r\n    GiftCertificateOrderPayment,\r\n    OrderPayment,\r\n    OrderPayments,\r\n} from './order';\r\nimport { OrderMetaState } from './order-state';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalOrder(\r\n    order: Order,\r\n    orderMeta: OrderMetaState = {},\r\n): InternalOrder {\r\n    const decimalPlaces = order.currency.decimalPlaces;\r\n    const amountTransformer = new AmountTransformer(decimalPlaces);\r\n\r\n    return {\r\n        id: order.orderId,\r\n        items: mapToInternalLineItems(order.lineItems, order.currency.decimalPlaces, 'productId'),\r\n        orderId: order.orderId,\r\n        currency: order.currency.code,\r\n        customerCanBeCreated: order.customerCanBeCreated,\r\n        payment: mapToInternalOrderPayment(order.payments, orderMeta.payment),\r\n        subtotal: {\r\n            amount: order.baseAmount,\r\n            integerAmount: amountTransformer.toInteger(order.baseAmount),\r\n        },\r\n        coupon: {\r\n            discountedAmount: reduce(\r\n                order.coupons,\r\n                (sum, coupon) => {\r\n                    return sum + coupon.discountedAmount;\r\n                },\r\n                0,\r\n            ),\r\n            coupons: order.coupons.map(mapToInternalCoupon),\r\n        },\r\n        discount: {\r\n            amount: order.discountAmount,\r\n            integerAmount: amountTransformer.toInteger(order.discountAmount),\r\n        },\r\n        token: orderMeta.orderToken,\r\n        callbackUrl: orderMeta.callbackUrl,\r\n        discountNotifications: [],\r\n        giftCertificate: mapToGiftCertificates(order.payments),\r\n        socialData: mapToInternalSocialDataList(order),\r\n        status: order.status,\r\n        hasDigitalItems: order.hasDigitalItems,\r\n        isDownloadable: order.isDownloadable,\r\n        isComplete: order.isComplete,\r\n        shipping: {\r\n            amount: order.shippingCostTotal,\r\n            integerAmount: amountTransformer.toInteger(order.shippingCostTotal),\r\n            amountBeforeDiscount: order.shippingCostBeforeDiscount,\r\n            integerAmountBeforeDiscount: amountTransformer.toInteger(\r\n                order.shippingCostBeforeDiscount,\r\n            ),\r\n        },\r\n        storeCredit: {\r\n            amount: mapToStoreCredit(order.payments),\r\n        },\r\n        taxes: order.taxes,\r\n        taxTotal: {\r\n            amount: order.taxTotal,\r\n            integerAmount: amountTransformer.toInteger(order.taxTotal),\r\n        },\r\n        handling: {\r\n            amount: order.handlingCostTotal,\r\n            integerAmount: amountTransformer.toInteger(order.handlingCostTotal),\r\n        },\r\n        grandTotal: {\r\n            amount: order.orderAmount,\r\n            integerAmount: order.orderAmountAsInteger,\r\n        },\r\n    };\r\n}\r\n\r\nexport function mapToInternalIncompleteOrder(checkout: Checkout): InternalIncompleteOrder {\r\n    const payment = find(checkout.payments, { providerType: HOSTED });\r\n\r\n    return {\r\n        orderId: null,\r\n        isComplete: false,\r\n        payment: !payment\r\n            ? {}\r\n            : {\r\n                  id: payment.providerId,\r\n                  gateway: payment.gatewayId,\r\n                  status: mapToInternalPaymentStatus(payment.detail.step),\r\n              },\r\n    };\r\n}\r\n\r\nfunction mapToInternalPaymentStatus(status: string): string {\r\n    return `PAYMENT_STATUS_${status}`;\r\n}\r\n\r\nfunction mapToStoreCredit(payments?: OrderPayments): number {\r\n    const item = find(payments, { providerId: 'storecredit' });\r\n\r\n    return item ? item.amount : 0;\r\n}\r\n\r\nfunction mapToGiftCertificates(payments?: OrderPayments): InternalGiftCertificateList {\r\n    const items = filter(payments, {\r\n        providerId: 'giftcertificate',\r\n    }) as GiftCertificateOrderPayment[];\r\n\r\n    return {\r\n        totalDiscountedAmount: reduce(items, (sum, item) => item.amount + sum, 0),\r\n        appliedGiftCertificates: keyBy(\r\n            items.map((item) => ({\r\n                code: item.detail.code,\r\n                discountedAmount: item.amount,\r\n                remainingBalance: item.detail.remaining,\r\n                giftCertificate: {\r\n                    balance: item.amount + item.detail.remaining,\r\n                    code: item.detail.code,\r\n                    purchaseDate: '',\r\n                },\r\n            })),\r\n            'code',\r\n        ),\r\n    };\r\n}\r\n\r\nfunction mapToInternalOrderPayment(\r\n    payments?: OrderPayments,\r\n    payment: InternalOrderPayment = {},\r\n): InternalOrderPayment {\r\n    const item = find(payments, isDefaultOrderPayment) as GatewayOrderPayment;\r\n\r\n    if (!item) {\r\n        return {};\r\n    }\r\n\r\n    return {\r\n        id: item.providerId,\r\n        status: mapToInternalPaymentStatus(item.detail.step),\r\n        helpText: item.detail.instructions,\r\n        returnUrl: payment.returnUrl,\r\n    };\r\n}\r\n\r\nfunction isDefaultOrderPayment(payment: OrderPayment): payment is GatewayOrderPayment {\r\n    return payment.providerId !== 'giftcertificate' && payment.providerId !== 'storecredit';\r\n}\r\n\r\nfunction mapToInternalSocialDataList(\r\n    order: Order,\r\n): { [itemId: string]: InternalSocialDataList } | undefined {\r\n    const socialDataObject: { [itemId: string]: InternalSocialDataList } = {};\r\n    const items = [...order.lineItems.physicalItems, ...order.lineItems.digitalItems];\r\n\r\n    items.forEach((item) => {\r\n        socialDataObject[item.id] = mapToInternalSocialData(item);\r\n    });\r\n\r\n    return socialDataObject;\r\n}\r\n\r\nfunction mapToInternalSocialData(lineItem: LineItem): InternalSocialDataList {\r\n    const codes = ['fb', 'tw', 'gp'];\r\n\r\n    return codes.reduce((socialData, code) => {\r\n        const item =\r\n            lineItem.socialMedia && find(lineItem.socialMedia, (item) => item.code === code);\r\n\r\n        if (!item) {\r\n            return socialData;\r\n        }\r\n\r\n        socialData[code] = {\r\n            name: lineItem.name,\r\n            description: lineItem.name,\r\n            image: lineItem.imageUrl,\r\n            url: item.link,\r\n            shareText: item.text,\r\n            sharingLink: item.link,\r\n            channelName: item.channel,\r\n            channelCode: item.code,\r\n        };\r\n\r\n        return socialData;\r\n    }, {} as InternalSocialDataList);\r\n}\r\n","import { Address, InternalAddress, mapToInternalAddress } from '../address';\r\nimport { Checkout } from '../checkout';\r\n\r\nimport InternalQuote from './internal-quote';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalQuote(\r\n    checkout: Checkout,\r\n    shippingAddress?: Address,\r\n): InternalQuote {\r\n    const consignment = checkout.consignments && checkout.consignments[0];\r\n\r\n    return {\r\n        orderComment: checkout.customerMessage,\r\n        shippingOption:\r\n            consignment && consignment.selectedShippingOption\r\n                ? consignment.selectedShippingOption.id\r\n                : undefined,\r\n        billingAddress: checkout.billingAddress\r\n            ? mapToInternalAddress(checkout.billingAddress)\r\n            : ({} as InternalAddress),\r\n        shippingAddress:\r\n            shippingAddress && mapToInternalAddress(shippingAddress, checkout.consignments),\r\n    };\r\n}\r\n","import InternalShippingOption from './internal-shipping-option';\r\nimport ShippingOption from './shipping-option';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalShippingOption(\r\n    option: ShippingOption,\r\n    isSelected: boolean,\r\n): InternalShippingOption {\r\n    return {\r\n        description: option.description,\r\n        module: option.type,\r\n        price: option.cost,\r\n        id: option.id,\r\n        selected: isSelected,\r\n        isRecommended: option.isRecommended,\r\n        imageUrl: option.imageUrl,\r\n        transitTime: option.transitTime,\r\n    };\r\n}\r\n","import Consignment from './consignment';\r\nimport { InternalShippingOptionList } from './internal-shipping-option';\r\nimport mapToInternalShippingOption from './map-to-internal-shipping-option';\r\n\r\n/**\r\n * @deprecated This mapper is only for internal use only. It is required during\r\n * the transition period as we are moving to adopt the new storefront API object\r\n * schema.\r\n */\r\nexport default function mapToInternalShippingOptions(\r\n    consignments: Consignment[],\r\n): InternalShippingOptionList {\r\n    return consignments.reduce((result, consignment) => {\r\n        let shippingOptions;\r\n\r\n        if (consignment.availableShippingOptions && consignment.availableShippingOptions.length) {\r\n            shippingOptions = consignment.availableShippingOptions;\r\n        } else if (consignment.selectedShippingOption) {\r\n            shippingOptions = [consignment.selectedShippingOption];\r\n        }\r\n\r\n        return {\r\n            ...result,\r\n            [consignment.id]: (shippingOptions || []).map((option) => {\r\n                const selectedOptionId =\r\n                    consignment.selectedShippingOption && consignment.selectedShippingOption.id;\r\n\r\n                return mapToInternalShippingOption(option, option.id === selectedOptionId);\r\n            }),\r\n        };\r\n    }, {});\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"shallowequal\");","export interface RootCacheKeyMap {\r\n    maps: ChildCacheKeyMap[];\r\n}\r\n\r\nexport interface IntermediateCacheKeyMap {\r\n    maps: ChildCacheKeyMap[];\r\n    parentMap: RootCacheKeyMap | IntermediateCacheKeyMap;\r\n    usedCount: number;\r\n    value: any;\r\n}\r\n\r\nexport interface TerminalCacheKeyMap extends IntermediateCacheKeyMap {\r\n    cacheKey: string;\r\n}\r\n\r\nexport type ChildCacheKeyMap = IntermediateCacheKeyMap | TerminalCacheKeyMap;\r\n\r\nexport function isTerminalCacheKeyMap(map: ChildCacheKeyMap): map is TerminalCacheKeyMap {\r\n    return Object.prototype.hasOwnProperty.call(map, 'cacheKey');\r\n}\r\n\r\nexport function isRootCacheKeyMap(map: RootCacheKeyMap | ChildCacheKeyMap): map is RootCacheKeyMap {\r\n    return Object.prototype.hasOwnProperty.call(map, 'parentMap');\r\n}\r\n","import { noop } from 'lodash';\r\nimport shallowEqual from 'shallowequal';\r\n\r\nimport {\r\n    ChildCacheKeyMap,\r\n    IntermediateCacheKeyMap,\r\n    isRootCacheKeyMap,\r\n    isTerminalCacheKeyMap,\r\n    RootCacheKeyMap,\r\n    TerminalCacheKeyMap,\r\n} from './cache-key-maps';\r\n\r\nexport interface CacheKeyResolverOptions {\r\n    maxSize?: number;\r\n    onExpire?(key: string): void;\r\n    isEqual?(valueA: any, valueB: any): boolean;\r\n}\r\n\r\ninterface ResolveResult {\r\n    index: number;\r\n    parentMap: RootCacheKeyMap | IntermediateCacheKeyMap;\r\n    map?: TerminalCacheKeyMap;\r\n}\r\n\r\nexport default class CacheKeyResolver {\r\n    private _lastId = 0;\r\n    private _map: RootCacheKeyMap = { maps: [] };\r\n    private _usedMaps: TerminalCacheKeyMap[] = [];\r\n    private _options: Required<CacheKeyResolverOptions>;\r\n\r\n    constructor(options?: CacheKeyResolverOptions) {\r\n        this._options = {\r\n            maxSize: 0,\r\n            isEqual: shallowEqual,\r\n            onExpire: noop,\r\n            ...options,\r\n        };\r\n    }\r\n\r\n    getKey(...args: any[]): string {\r\n        const result = this._resolveMap(...args);\r\n        const { index, parentMap } = result;\r\n        let { map } = result;\r\n\r\n        if (map && map.cacheKey) {\r\n            map.usedCount++;\r\n        } else {\r\n            map = this._generateMap(parentMap, args.slice(index));\r\n        }\r\n\r\n        // Keep track of the least used map so we can remove it if the size of\r\n        // the stack exceeds the maximum size.\r\n        this._removeLeastUsedMap(map);\r\n\r\n        return map.cacheKey;\r\n    }\r\n\r\n    getUsedCount(...args: any[]): number {\r\n        const { map } = this._resolveMap(...args);\r\n\r\n        return map ? map.usedCount : 0;\r\n    }\r\n\r\n    private _resolveMap(...args: any[]): ResolveResult {\r\n        let index = 0;\r\n        let parentMap = this._map;\r\n\r\n        // Traverse the tree to find the linked list of maps that match the\r\n        // arguments of the call. Each intermediate or terminal map contains a\r\n        // value that could be used to match with the arguments. The last map in\r\n        // the list (the terminal) should contain a cache key. If it can does\r\n        // not exist, we will return a falsy value so that the caller could\r\n        // handle and generate a new cache key.\r\n        while (parentMap.maps.length) {\r\n            let isMatched = false;\r\n\r\n            for (let mapIndex = 0; mapIndex < parentMap.maps.length; mapIndex++) {\r\n                const map = parentMap.maps[mapIndex];\r\n\r\n                if (!this._options.isEqual(map.value, args[index])) {\r\n                    continue;\r\n                }\r\n\r\n                // Move the most recently used map to the top of the stack for\r\n                // quicker access\r\n                parentMap.maps.unshift(...parentMap.maps.splice(mapIndex, 1));\r\n\r\n                if (\r\n                    (args.length === 0 || index === args.length - 1) &&\r\n                    isTerminalCacheKeyMap(map)\r\n                ) {\r\n                    return { index, map, parentMap };\r\n                }\r\n\r\n                isMatched = true;\r\n                parentMap = map;\r\n                index++;\r\n\r\n                break;\r\n            }\r\n\r\n            if (!isMatched) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return { index, parentMap };\r\n    }\r\n\r\n    private _generateMap(\r\n        parent: RootCacheKeyMap | IntermediateCacheKeyMap,\r\n        args: any[],\r\n    ): TerminalCacheKeyMap {\r\n        let index = 0;\r\n        let parentMap = parent;\r\n        let map: IntermediateCacheKeyMap;\r\n\r\n        do {\r\n            map = {\r\n                maps: [],\r\n                parentMap,\r\n                usedCount: 1,\r\n                value: args[index],\r\n            };\r\n\r\n            // Continue to build the tree of maps so that it could be resolved\r\n            // next time when the function is called with the same set of\r\n            // arguments.\r\n            parentMap.maps.unshift(map);\r\n\r\n            parentMap = map;\r\n            index++;\r\n        } while (index < args.length);\r\n\r\n        const terminalMap = map as TerminalCacheKeyMap;\r\n\r\n        terminalMap.cacheKey = `${++this._lastId}`;\r\n\r\n        return terminalMap;\r\n    }\r\n\r\n    private _removeLeastUsedMap(recentlyUsedMap: TerminalCacheKeyMap): void {\r\n        if (!this._options.maxSize) {\r\n            return;\r\n        }\r\n\r\n        const index = this._usedMaps.indexOf(recentlyUsedMap);\r\n\r\n        this._usedMaps.splice(index === -1 ? 0 : index, index === -1 ? 0 : 1, recentlyUsedMap);\r\n\r\n        if (this._usedMaps.length <= this._options.maxSize) {\r\n            return;\r\n        }\r\n\r\n        const map = this._usedMaps.pop();\r\n\r\n        if (!map) {\r\n            return;\r\n        }\r\n\r\n        this._removeMap(map);\r\n        this._options.onExpire(map.cacheKey);\r\n    }\r\n\r\n    private _removeMap(map: ChildCacheKeyMap): void {\r\n        if (!map.parentMap) {\r\n            return;\r\n        }\r\n\r\n        map.parentMap.maps.splice(map.parentMap.maps.indexOf(map), 1);\r\n\r\n        if (isRootCacheKeyMap(map.parentMap)) {\r\n            return;\r\n        }\r\n\r\n        this._removeMap(map.parentMap);\r\n    }\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","mapToInternalAddress","address","consignments","addressId","id","isBillingAddressLike","length","firstName","lastName","company","addressLine1","address1","addressLine2","address2","city","province","stateOrProvince","provinceCode","stateOrProvinceCode","postCode","postalCode","country","countryCode","phone","customFields","require","_decimalPlaces","toInteger","amount","Math","round","pow","this","couponTypes","mapToInternalCoupon","coupon","code","discount","displayName","discountType","indexOf","couponType","mapToInternalGiftCertificate","giftCertificate","discountedAmount","used","remainingBalance","remaining","balance","purchaseDate","mapToInternalLineItem","item","type","decimalPlaces","idKey","amountTransformer","imageUrl","extendedListPrice","amountAfterDiscount","extendedSalePrice","discountAmount","integerAmount","integerAmountAfterDiscount","integerDiscount","integerUnitPrice","listPrice","integerUnitPriceAfterDiscount","salePrice","downloadsPageUrl","downloadPageUrl","name","quantity","brand","sku","categoryNames","variantId","productId","attributes","options","map","option","addedByPromotion","mapToInternalLineItems","itemMap","keys","reduce","result","sender","recipient","mapGiftCertificateToInternalLineItem","mapToInternalLineItemType","mapToInternalCart","checkout","promotions","notifications","cart","currency","items","lineItems","coupons","sum","discountNotifications","forEach","promotion","banners","banner","push","placeholders","message","messageHtml","text","totalDiscountedAmount","giftCertificates","certificate","appliedGiftCertificates","keyBy","shipping","shippingCostTotal","amountBeforeDiscount","shippingCostBeforeDiscount","integerAmountBeforeDiscount","required","some","physicalItems","lineItem","isShippingRequired","subtotal","storeCredit","customer","taxSubtotal","taxTotal","taxes","handling","handlingCostTotal","grandTotal","mapToInternalCustomer","billingAddress","addresses","customerId","isGuest","email","fullName","join","customerGroupName","customerGroup","mapToInternalOrder","order","orderMeta","payments","orderId","customerCanBeCreated","payment","mapToInternalOrderPayment","baseAmount","token","orderToken","callbackUrl","filter","providerId","detail","socialData","mapToInternalSocialDataList","status","hasDigitalItems","isDownloadable","isComplete","mapToStoreCredit","orderAmount","orderAmountAsInteger","find","isDefaultOrderPayment","step","helpText","instructions","returnUrl","socialDataObject","digitalItems","socialMedia","description","image","url","link","shareText","sharingLink","channelName","channel","channelCode","mapToInternalQuote","shippingAddress","consignment","orderComment","customerMessage","shippingOption","selectedShippingOption","undefined","mapToInternalShippingOption","isSelected","price","cost","selected","isRecommended","transitTime","mapToInternalShippingOptions","shippingOptions","availableShippingOptions","selectedOptionId","isTerminalCacheKeyMap","_lastId","_map","maps","_usedMaps","_options","maxSize","isEqual","onExpire","noop","getKey","_resolveMap","args","index","parentMap","cacheKey","usedCount","_generateMap","slice","_removeLeastUsedMap","getUsedCount","isMatched","mapIndex","unshift","splice","parent","terminalMap","recentlyUsedMap","pop","_removeMap","isRootCacheKeyMap"],"sourceRoot":""}